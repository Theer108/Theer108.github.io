<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Clean code - Functions - Part 2</title>
    <meta name="description" content="Nerdy Geek - Passionate view on Computer Science, IT and nerdy things" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Nerdy Geek" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Nerdy Geek" />
    <meta property="og:description" content="Passionate view on Computer Science, IT and nerdy things" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Nerdy Geek" />
    <meta name="twitter:description" content="Passionate view on Computer Science, IT and nerdy things" />
    <meta name="twitter:site" content="@NerdyGeekIo" />
    
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="https://theer108.github.io/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Nerdy Geek",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Passionate view on Computer Science, IT and nerdy things"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Nerdy Geek" href="/feed.xml" />



</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-craftsman " role="presentation"><a href="/tag/craftsman">Software Craftsman</a></li>
        <li class="nav-author " role="presentation"><a href="/author/Theer">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover13.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/logo.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-craftsman">

        <header class="post-header">
            <h1 class="post-title">Clean code - Functions - Part 2</h1>
            <section class="post-meta">
            <!-- <a href='/'>Łukasz Chrząszcz</a> -->
            <time class="post-date" datetime="2016-07-09">09 Jul 2016</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/craftsman'>Craftsman</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p>Let’s continue our journey through cleaning dusty functions! Today we’ll talk 
about <strong>constructors, side effects, return values and how to be awesome in general</strong> 
If you haven’t done so, go read <a href="/clean-code-functions">Part 1</a>.</p>

<h2 id="constructors">Constructors</h2>

<p>There couldn’t be a decent summary of readable code without mentioning constructors.
What are they - everybody knows, but what we can do to improve them? … Well… 
<strong>Remove them?</strong></p>

<p>Seriously, problem with constructors is that they don’t have name so it’s hard to 
understand their meaning. For sure it’s obvious for ctor such:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">Point</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{...}</span>
<span class="kd">public</span> <span class="nf">String</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{...}</span>
</code></pre>
</div>

<p>But consider more <strong>complex examples</strong> - assume you have a class <code class="highlighter-rouge">Employee</code> and every
object of this type has to have a supervisor (don’t care about boss :D). So
first thought is to create one constructor with Employee argument to pass supervisor.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">Employee</span><span class="p">(</span><span class="n">Employee</span> <span class="n">supervisor</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">supervisor</span> <span class="o">=</span> <span class="n">supervisor</span><span class="o">;</span>
<span class="o">}</span> 
</code></pre>
</div>

<p>So far so good, but after a few months you see following code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Employee</span> <span class="n">em1</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">Employee</span> <span class="n">em2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">em1</span><span class="o">);</span>
</code></pre>
</div>

<p>Do you think you’d remember that this em1 is a supervisor of new employee? Probably not.
Solution is to <strong>create a Factory Method instead of constructor</strong>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">Employee</span> <span class="nf">createNewWithSupervisor</span><span class="p">(</span><span class="n">Employee</span> <span class="n">supervisor</span><span class="o">)</span> <span class="o">{...}</span>

<span class="o">...</span>

<span class="n">Employee</span> <span class="n">em1</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">Employee</span> <span class="n">em2</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">.</span><span class="na">createNewWithSupervisor</span><span class="o">(</span><span class="n">em1</span><span class="o">);</span>
</code></pre>
</div>

<p>Now you don’t have to even think what does this code do - <strong>you just know it</strong>!</p>

<h2 id="dont-return-null">Don’t return <em>null</em></h2>

<p>This is a common thing. Personally I’ve made it a lot of such mistakes! It seems like
a good idea - you’re implementing your super ultra mega business logic - <em>oh! If there’s
an error I should do something… well let’s return null, that’ll do!</em></p>

<p><a href="http://www.instantsfun.es/wrong/" target="_blank">WRONG!</a> By doing that, you:</p>

<ol>
  <li>Force user to immediately handle your error</li>
  <li>Prevent yourself from discovering the source of error</li>
</ol>

<p>As for first point - better solution would be to <strong>use exceptions</strong>, so the user can create
more readable code himself.</p>

<p>The second point is more serious, simply because by returning null you have no idea 
what went wrong. What if your function can fail because of two reasons? From the
outside, nobody can tell the difference and choose the best way to fix that.</p>

<p>Additionally - <strong>null doesn’t have a descriptive name</strong>, so it’s easy to introduce
misleading ifs:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if (gameBoard.getTileState(x, y) == null) {
    ...
}
</code></pre>
</div>

<p>What does this null actually represents? Some kind of neutral state? Maybe clear tile
or something? You have to check the other end of the project for that to know.</p>

<h2 id="side-effects">Side effects</h2>

<p>If you’re programming for a few years, you for sure spent lots of hours hunting this
nasty little bug in your code. At the end you probably shouted something like this:
<em>Oh my god! it’s because this function changes this field and after that… bla bla bla</em>
Sound familiar?</p>

<p>Those are <strong>side effects</strong>. If function changes state of something outside like a field or global
variable (yuk!) this is a side effect.</p>

<p>You probably can’t eliminate them all, as they’re not a bug or something, but for sure you can eliminate a lot of problems with them. Good thing to bear in mind is that you should <strong>avoid them
as much as you can</strong> - instead of creating 5 methods, each changing your object, create 4 methods
calculating/processing something and 1 method changing the state. What is more, remember to <strong>give
this method a proper name!</strong> This way others can understand <em>oh! this method has some side effects</em>.</p>

<p>Bad code example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">checkUsernameAndPassword</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">correctPassword</span> <span class="o">=</span> <span class="n">getPassword</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">correctPassword</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">password</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">createSession</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Aaaand boom, checkUsernameAndPassword has a side effect of creating session. You wouldn’t realise that
checking the implementation. Good code example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">authenticateUser</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">correctPassword</span> <span class="o">=</span> <span class="n">getPassword</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">correctPassword</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">password</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">createSession</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>   
<span class="o">}</span>
</code></pre>
</div>

<p>Simply by <strong>changing name</strong> you can alarm user that you’ll probably do something more than merely
checking password - you’re creating session!</p>

<h2 id="summary">Summary</h2>

<p>The most crucial points from today are:</p>

<ol>
  <li>Consider replacing complex/not obvious constructors with Factory Methods</li>
  <li>Think twice before returning plain null</li>
  <li>Avoid side effects and explicitly signal them.</li>
</ol>

<p>I hope this comes in handy for you! Let me know what do you think and what are your ways of
maintaining readable code? See you soon!</p>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/Theer" style="background-image: url(/assets/images/lukasz.png)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/Theer">Łukasz Chrząszcz</a></h4>
                
                
                    <p> Passionate Computer Scientist keen on discovering new things and laying his hand on them</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Kraków, Poland</span> 
                    <span class="author-link icon-link"><a href="https://theer108.github.io/"> Theer108.github.io/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Clean code - Functions - Part 2&amp;url=https://theer108.github.io/clean-code-functions-part2"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://theer108.github.io/clean-code-functions-part2"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://theer108.github.io/clean-code-functions-part2"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'theer108'; // required: replace example with your forum shortname
        var disqus_identifier = '/clean-code-functions-part2';
        var disqus_url = 'https://theer108.github.io//clean-code-functions-part2';
 
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover1.jpg)" href="/clean-code-functions">
            <section class="post">
                <h2>Clean code - Functions - Part 1</h2>
                <p>Functions! Good old functions… Your first thought after hearing “readable code” was probably functions, methods,...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Nerdy Geek</a> &copy; 2016</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');




	    ga('create', 'UA-80545838-1', 'auto');
	    ga('send', 'pageview');

     </script>
   
</body>
</html>
